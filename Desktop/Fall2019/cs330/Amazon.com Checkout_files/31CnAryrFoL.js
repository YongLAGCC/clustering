(function(k){var q=window.AmazonUIPageJS||window.P,v=q._namespace||q.attributeErrors,d=v?v("CheckoutWebappAssets",""):q;d.guardFatal?d.guardFatal(k)(d,window):d.execute(function(){k(d,window)})})(function(k,q,v){k.when("A","jQuery","utils/createClass").register("components/Component",function(d,f,e){var a=e({$el:null,props:{},defaultProps:{},init:function(c){this.$el=f(c.$el);if(1<this.$el.length)throw Error("Component must be attached with only one DOM element");if(!this.$el.length)return this;this.bindAll();
this.props=f.extend({},this.defaultProps,c);this.onInit(this.props)},onInit:f.noop,find:function(c){return this.$el.find(c)},bindAll:function(){for(var c in this)"function"===typeof this[c]&&(this[c]=f.proxy(this[c],this))},data:function(){return this.$el.data.apply(this.$el,arguments)}});a.create=function(c){var a=this;return c.$el.length?d.map(c.$el,function(e){return new a(d.extend({},c,{$el:f(e)}))}):[]};a.extend=function(){function c(e){e=d.call(this,e);e.extend=c;e.create=a.create;return e}
var d=a.extend;return c}();return a});"use strict";k.when("jQuery","components/Component","weblab-helper").register("components/Checkbox",function(d,f,e){return f.extend({checkbox:null,$el:null,defaultProps:{onChange:d.noop},onInit:function(){if(e.isPyoClientSideInitiationEnabled()){if(!this.$el.length||!this.$el.is(":checkbox"))throw Error("[Checkbox] No checkbox input is found");this.$el.bind("change",this.handleChange)}else{if(!this.$el.hasClass("a-checkbox"))throw Error("[Checkbox] Checkbox component must instantiate with an `a-checkbox` element");
this.$input=this.find(":checkbox");if(!this.$input.length)throw Error("[Checkbox] No checkbox input is found");this.$input.bind("change",this.handleChange)}},handleChange:function(a){this.props.onChange(this.isChecked(),this,a)},isChecked:function(){return e.isPyoClientSideInitiationEnabled()?this.$el.is(":checked"):this.$input.is(":checked")},data:function(a,c){return this.$el.data(a,c)}})});"use strict";k.when("A","jQuery","components/Component","components/Checkbox","weblab-helper").register("components/PrimaryActionBlockerCheckbox",
function(d,f,e,a,c){function n(){var a=d.reduce(g,function(a,e){var h="";if(a.blocking)return a;c.isPyoClientSideInitiationEnabled()?(a=e.shouldBlock())&&(h=e.getBlockerMessage()):(a=!e.isChecked())&&(h=e.data("blocker-message"));return{blocking:a,message:h}},{blocking:null,message:""});d.equals(a,h)||(h=a,d.trigger(l.blockingStateChanged,a))}var g=[],h={blocking:null,message:""},l={blockingStateChanged:"checkbox:primaryActionBlocker:blockingStateChanged"};e=e.extend({onInit:function(e){c.isPyoClientSideInitiationEnabled()?
(this.checkbox=new a({$el:this.$el,onChange:n}),this.blockerMessage=e.blockerMessage,g.push(this)):(this.checkbox=new a({$el:this.$el,onChange:n}),g.push(this.checkbox));n()},shouldBlock:function(){return!this.$el.is(":checked")},getBlockerMessage:function(){return this.blockerMessage}});e.events=l;e.tryChangingBlockingState=n;e.getState=function(){return g.length?f.extend({},h):null};var K=c.isPyoClientSideInitiationEnabled()?"checkout:unload":"checkout:beforeReload";d.on(K,function(){g=[];h={blocking:null,
message:""}});return e});"use strict";k.when("A","jQuery","page-transition-controller","page-conductor").register("widgets/ageVerification/removeLineItems",function(d,f,e,a){d.declarative("age-restriction-remove-restricted-items","click",function(c){c=c.data;var d=(new Date).getTime(),g=a.setAjaxTransitionHeader({"x-amz-checkout-page":"agelimitation"});if(a.isSPP()){e.blockAllActions();var h=c.loadingText,l=f("#agelimitation");e.shrinkPanel(l,!0,h)}else e.showPageTransition();f.ajax({type:"POST",
url:c.url+"\x26cachebuster\x3d"+d,data:f.param(c.param,!0),dataType:"text",headers:g,error:a.ajaxRedirect,success:a.ajaxUpdatePage})})});"use strict";k.when("A","jQuery").register("widgets/ageVerification/switchIdForm",function(d,f){d.declarative("age-verification-change-id-dropdown","change",function(e){var a=e.$target.find(":selected").val().toLowerCase().replace(/_/g,"-");e=".age-verification-id-"+a;var a=".enter-number-"+a,c=f("[name\x3d'age_verification_form']");c.find(".age-verification-id").addClass("aok-hidden");
c.find(".enter-number").prop("required",!1);c.find(e).removeClass("aok-hidden");c.find(a).prop("required",!0)})});"use strict";k.when("A","jQuery","page-transition-controller","page-conductor").register("widgets/ageVerification/ageVerification",function(d,f,e,a){function c(){var a;a=f('[name\x3d"age_verification_form"]').find('input[name\x3d"dob_input"]').val().split(/\D/);a=new Date(a[0],a[1]-1,a[2]);var c=f('[name\x3d"age_verification_form"]').find('input[name\x3d"ageLimitation"]').val(),e=new Date;
if(e.getFullYear()-a.getFullYear()===Number(c)){if(0<=e.getMonth()-a.getMonth()&&0<=e.getDate()-a.getDate())return!0}else if(e.getFullYear()-a.getFullYear()>Number(c))return!0;f('[name\x3d"age_verification_form"]').find("#dob-error-message").removeClass("aok-hidden");return!1}function n(c,e){e=a.setAjaxTransitionHeader({"x-amz-checkout-page":"agelimitation"});return f.ajax({type:"POST",url:"/gp/buy/agelimitation/handlers/decode.html",data:c,dataType:"text",headers:e,success:g})}function g(c,d,g){g.getResponseHeader("x-amz-checkout-agelimitation-invalid-id")?
(a.isSPP()?(c=f("#agelimitation"),c.removeClass("spp-panel.collapsed"),c.addClass("spp-panel.expanded"),d=c.find(".panel-content"),c.find(".shrink-placeholder").hide(),d.show(),e.unblockAllActions()):e.hide(),f('[name\x3d"age_verification_form"]').find("#id-error-message").removeClass("aok-hidden")):a.ajaxUpdatePage(c,d,g)}f(document.documentElement).delegate('[name\x3d"age_verification_form"]',"submit",function(d){d.preventDefault();d=f(d.target);d.find("#dob-error-message").addClass("aok-hidden");
d.find("#id-error-message").addClass("aok-hidden");if(c()){if(a.isSPP()){e.blockAllActions();var g=d.data("loadingtext"),k=f("#agelimitation");e.shrinkPanel(k,!0,g)}else e.showPageTransition();g=d.data("profile");f.ajax({type:"POST",url:"/ap/cvf/request/identity?sif_profile\x3d"+g,data:d.serialize(),dataType:"json"}).done(n).fail(a.ajaxRedirect)}})});"use strict";k.when("A","jQuery","gift-utility","a-checkbox","page-transition-controller","a-button","a-truncate").register("widgets/giftOptions/giftOptions",
function(d,f,e,a,c,n,g){function h(b){return a("#gift-receipt-checkbox-"+b)}function l(b){return m.find("#message-area-"+b)}function k(b){return m.find("#message-counter-"+b)}function p(b){return a("#gift-wrap-checkbox-"+b)}function q(b){return m.find('input[name\x3d"wrap.'+b+'"]:checked')}function r(b){return a("#digital-gift-message-checkbox-"+b)}function x(b){return m.find("#digital-gift-message-text-input-"+b)}function v(b){return m.find("#gift-message-sender-input-"+b)}function D(b){return a("#toggle-gift-item-checkbox-"+
b)}function E(){return n("#chewbacca-save-gift-options-button")}function t(b){b.addClass("aok-hidden")}function u(b){b.removeClass("aok-hidden")}function w(b){b.prop("disabled",!0);b.removeClass("a-form-normal").addClass("a-form-disabled")}function y(b){b.prop("disabled",!1);b.removeClass("a-form-disabled").addClass("a-form-normal")}function F(b){t(b.find(".gift-options-summary-header"));u(b.find(".gift-options-expanded-header"))}function G(b){return 0!==r(b).size()&&r(b).isChecked()}function z(b){return 0!==
h(b).size()?h(b).isChecked():!0}function C(b){h(b).check();A(b)}function H(b,a,c){var e=k(b).find("."+a+"-counter");b=e.find(".count");a=e.find(".message");var d=Math.abs(c),e=e.data("messageData");c=0<c?"remaining":"over";var f=1===d?"single":"multiple";b.text(d);a.text(e[c][f])}function I(b,a){b=k(b);b.data("newCounterWeblabOn")?b.find(".counter-text").toggleClass("a-color-error",!a):b.toggleClass("a-color-error",!a)}function A(b){var a=l(b).closest("[data-message-validation-options]").data("messageValidationOptions"),
c=l(b),d=v(b),g=c.val(),n=d.val(),q=k(b).data("newCounterWeblabOn"),p=e.getLineCount(g,a.maxLineLength),p=a.maxLines-p;q?H(b,"lines",p):m.find("#remaining-lines-count-"+b).text(p);p=a.maxChars-g.length;q?H(b,"chars",p):m.find("#remaining-char-count-"+b).text(p);q=0!==h(b).size()?!h(b).isChecked():0<D(b).size()?!D(b).isChecked():!1;if(q)w(c),w(d),w(x(b)),r(b).disable(),I(b,!0),delete B[b];else{y(c);y(d);g?(y(x(b)),r(b).enable()):(w(x(b)),r(b).disable());a:if(c=e.getLineCount(g,a.maxLineLength),d=g.length,
c>a.maxLines||d>a.maxChars)a=!1;else{if(a.validateDigitalGiftMessage){if(!n){a=!1;break a}if(e.valueContainsUrl(g)||e.valueContainsUrl(n)){a=!1;break a}}a=!0}a&&(a=G(b)?(a=x(b).val())&&e.isValidEmail(a):!0);I(b,a);a?delete B[b]:B[b]=!0}f.isEmptyObject(B)?E().enable():E().disable();a=m.find("#empty-message-warning-"+b);0===g.length&&z(b)?u(a):t(a)}var m,B={},J=function(){B={};m=f("#giftOptions-contains");m.find(".a-truncate").each(function(){g.get(this).update()});m.find(".gift-message-textarea textarea").trigger("change")};
d.declarative("chewbacca-gift-receipt-checkbox","change",function(b){b=b.data.lineItemIndex;var a=m.find("#gift-receipt-warning-"+b);z(b)?t(a):u(a);A(b)});d.declarative("chewbacca-toggle-gift-item","change",function(b){b=b.data.lineItemIndex;if(D(b).isChecked()){y(l(b));0!==r(b).size()&&(r(b).enable(),y(x(b)),y(v(b)));0!==p(b).size()&&p(b).enable();var a=m.find('input[name\x3d"wrap.'+b+'"]');0!==a.size()&&a.prop("disabled",!1)}else w(l(b)),0!==r(b).size()&&(r(b).disable(),w(x(b)),w(v(b))),0!==p(b).size()&&
(a=p(b),a.uncheck(),a.disable()),a=m.find('input[name\x3d"wrap.'+b+'"]'),0!==a.size()&&(m.find("#gift-wrap-radio-"+b+"-none").click(),a.prop("disabled",!0));A(b)});d.declarative("chewbacca-gift-message-textarea","change keydown keyup click focus",function(b){"textarea"===b.targetTag&&C(b.data.lineItemIndex)});d.declarative("chewbacca-sender-name-input","change keydown keyup click focus",function(b){"input"===b.targetTag&&C(b.data.lineItemIndex)});d.declarative("chewbacca-gift-wrap-checkbox","change",
function(b){b=b.data.lineItemIndex;p(b).isChecked()?(z(b)||C(b),h(b).disable()):h(b).enable()});d.declarative("chewbacca-gift-wrap-radio","change",function(b){b=b.data.lineItemIndex;var a=q(b);d.contains(a.attr("id"),"none")?h(b).enable():(z(b)||C(b),h(b).disable())});d.declarative("chewbacca-digital-gift-message-checkbox","change",function(b){b=b.data.lineItemIndex;var a=m.find("#digital-gift-message-input-wrapper-"+b);G(b)?u(a):t(a);A(b)});d.declarative("chewbacca-recipient-contact-details","change keydown keyup click focus",
function(b){A(b.data.lineItemIndex)});d.declarative("chewbacca-gift-options-submit","submit",function(){c.showPageTransition()});d.on("a:expander:chewbacca-gift-options-expander:toggle:collapse",function(b){b=b.expander.$expander;var a=b.data("lineitemindex"),c;c=l(a).val();c=!c||10>=c.length?c||"":c.substring(0,10)+"...";var e=0<c.length,d=q(a).val()||"",g=!!d,f=z(a);(0!==h(a).size()?z(a):e||g)?(u(b.find(".gift-options-summary-header")),t(b.find(".gift-options-expanded-header")),a=b.find(".gift-receipt-summary"),
f?u(a):t(a),a=b.find(".gift-message-summary"),e?u(a):t(a),b.find(".gift-message-preview").text(c),t(b.find(".gift-wrap-summary")),u(b.find(".gift-wrap-summary-"+d.replace(/#/g,"\\#")))):F(b)});d.on("a:expander:chewbacca-gift-options-expander:toggle:expand",function(b){F(b.expander.$expander)});d.on("checkout:reload:giftselect",J);d.on("checkout:reload:spp-giftoptions",J)});"use strict";k.when("A","jQuery","components/PrimaryActionBlockerCheckbox","weblab-helper","client-side-metrics").register("widgets/purchaseLevelMessages/blockingConfirmationMessages",
function(d,f,e,a,c){function n(){a.isPyoClientSideInitiationEnabled()||e.create({$el:f('#purchase-level-messages [data-client-component\x3d"PrimaryActionBlockerCheckbox"]')})}d.each(["checkout:reload:spc","checkout:reload:spclite","checkout:reload:spp-revieworder","checkout:reload:spp-collapsed"],function(a){d.on(a,n)})});k.when("A","jQuery","components/Component","components/PrimaryActionBlockerCheckbox","verification-checkbox-controller").register("widgets/pyoButton/PyoButton",function(d,f,e,a,
c){return e.extend({onInit:function(){var c=a.getState();this.block(c);d.on(a.events.blockingStateChanged,this.block)},block:function(a){a&&c.updatePyo(a)}})});"use strict";k.when("A","jQuery","widgets/subscribeAndSave/snsCommon").execute("widgets/subscribeAndSave/setSnSOptions",function(d,f,e){function a(a,d,g,h){var l=e.getSnSItemData(a);a={asin:l.asin,encodedLineItemId:l.lineItemId,encryptedMerchantId:l.encryptedMerchantId,merchantSku:l.merchantSku,couponId:f("#sns-item-discount-"+a).data("couponId"),
redeemCoupon:e.convertToPerlBoolean(h),mostCommonFrequency:f("#sns-frequency-accordion-"+a).data("mostCommonFrequency"),optedIn:e.convertToPerlBoolean(d),customerSelectedFrequency:g};e.updatePurchase([a])}d.declarative("sns-item-checkbox","change",function(c){c=c.data.index;var d=e.isCustomerOptedIn("#sns-item-checkbox-",c),g=e.getActiveSubscriptionFrequency("#sns-frequency-selector-",c);a(c,d,g,!0)});d.on("a:accordion:sns-frequency-accordion:select",function(c){c=c.selectedRow.$row.data();var d=
c.index,g=c.frequency,f=e.isCustomerOptedIn("#sns-item-checkbox-",d);f?a(d,f,g,!1):e.setActiveSubscriptionFrequency("#sns-frequency-selector-",c)})});"use strict";k.when("jQuery","page-transition-controller","page-conductor").register("widgets/subscribeAndSave/snsCommon",function(d,f,e){return{convertToPerlBoolean:function(a){return a?1:0},getSnSItemData:function(a){return d("#sns-item-"+a).data()},isCustomerOptedIn:function(a,c){return d(a+c).is(":checked")},updatePurchase:function(a,c){var n=e.setAjaxTransitionHeader({"x-amz-checkout-page":"spc"});
f.show();d.ajax({type:"POST",url:"/gp/buy/spc/handlers/set-subscribe-and-save-options.html",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",data:{subscriptionParameters:JSON.stringify(a)},dataType:"text",cache:!1,async:!0,headers:n,success:function(a,d,l){"function"===typeof c&&(c(),f.hide());e.ajaxUpdatePage(a,d,l)},error:function(a,c,d){e.ajaxRedirect(a,c,d)}})},setActiveSubscriptionFrequency:function(a,c){d(a+c.index).text(c.frequencyText).data("activeFrequency",c.frequency)},
getActiveSubscriptionFrequency:function(a,c){return d(a+c).data("activeFrequency")}}});k.when("A").register("utils/createClass",function(d){function f(){}if(d.createClass)return d.createClass;var e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;f.extend=function(a){var c=this.prototype,d=Object.create?Object.create(c):function(a){function c(){}c.prototype=a;return new c}(c),g;for(g in a)d[g]="function"===typeof a[g]&&"function"===typeof c[g]&&e.test(a[g])?function(a,d){return function(){var e=this._super;
this._super=c[a];var f=d.apply(this,arguments);this._super=e;return f}}(g,a[g]):a[g];a="function"===typeof d.init?d.hasOwnProperty("init")?d.init:function(){c.init.apply(this,arguments)}:function(){};a.prototype=d;d.constructor=a;a.extend=f.extend;return a};return function(a){return f.extend(a)}})});